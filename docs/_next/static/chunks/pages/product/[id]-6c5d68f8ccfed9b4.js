(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{8871:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return r(8483)}])},8243:function(e,t,r){"use strict";var n=r(7294),s=r(5121);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={q:"",limit:20},r={paging:{total:0,primary_results:0,offset:0,limit:0},results:[]};(e={params:t,...e}).params={...t,...e.params};let[i,l]=(0,n.useState)(!1),[a,o]=(0,n.useState)(e.params),[u,d]=(0,n.useState)(r),c=async()=>{l(!0);try{let{data:e}=await (0,s.Z)({method:"get",url:"https://api.mercadolibre.com/sites/MLB/search",params:a});return e.results=e.results.map(e=>({id:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail})),d(e),e}catch(e){d(r)}finally{l(!1)}};return{busy:i,params:a,paramsUpdate:e=>{o(t=>({...t,...e}))},setParams:o,response:u,submit:c}}},8483:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(5893),s=r(9008),i=r.n(s),l=r(7294),a=r(5121),o=()=>{let[e,t]=(0,l.useState)(!1),[r,n]=(0,l.useState)(null);return{busy:e,response:r,load:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return null;t(!0);try{let{data:r}=await (0,a.Z)({method:"get",url:"https://api.mercadolibre.com/items",params:{ids:e}});if(void 0!==r[0]&&!r[0].body.error){let e=r[0].body;return e={id:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail},n(e),t(!1),e}return null}catch(e){n(null)}finally{t(!1)}return null}}},u=r(1163),d=r(8243),c=r(9814),m=r(1205),p=r(5177);function h(){let e=(0,c.Z)(),t=(0,u.useRouter)(),r=o(),s=(0,l.useContext)(p.A),[a,h]=(0,l.useState)(null),x=(0,d.Z)({params:{q:"Autom\xf3veis",limit:6}});return(0,l.useEffect)(()=>{t.query.id&&(async()=>{let e=Array.isArray(t.query.id)?t.query.id[0]:t.query.id,n=await r.load(e);n&&(h(s.itemFind(n)),x.paramsUpdate({q:n.title}))})()},[t.query]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{x.submit()},1e3);return()=>{clearTimeout(e)}},[x.params]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"Produto"})}),(0,n.jsxs)("main",{className:"container mx-auto",children:[!r.busy&&!r.response&&(0,n.jsx)("div",{children:"Produto n\xe3o encontrado"}),!r.busy&&r.response&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"font-bold text-3xl",children:r.response.title}),(0,n.jsx)("h1",{className:"font-bold text-2xl text-green-600",children:e.money(r.response.price)}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:"border rounded-md overflow-hidden",style:{maxWidth:250},children:[(0,n.jsx)("div",{style:{minWidth:250,maxWidth:250,height:250,background:"url(".concat(r.response.thumbnail,") center center no-repeat")}}),!a&&(0,n.jsx)("button",{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4",onClick:()=>{r.response&&(s.itemAdd(r.response),h(s.itemFind(r.response)))},children:"Adicionar ao carrinho"}),a&&(0,n.jsxs)("div",{className:"flex border-t",children:[(0,n.jsx)("div",{className:"grow",children:(0,n.jsx)("input",{type:"number",className:"w-full p-2",value:a.quantity,onInput:e=>{let t=e.target;a.quantity=+t.value,s.itemUpdate(a)}})}),(0,n.jsx)("button",{type:"button",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4",onClick:async()=>{await s.itemRemove(a.product),h(null)},children:"Remover"})]})]})]}),(0,n.jsx)("br",{}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"Relacionados"}),(0,n.jsx)("div",{className:"flex gap-3 overflow-auto",children:x.response.results.map(e=>(0,n.jsx)("div",{style:{minWidth:250,maxWidth:250},children:(0,n.jsx)(m.Z,{product:e})},e.id))})]})]})}},1163:function(e,t,r){e.exports=r(2937)}},function(e){e.O(0,[448,774,888,179],function(){return e(e.s=8871)}),_N_E=e.O()}]);