(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{8871:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return s(8483)}])},8243:function(e,t,s){"use strict";var r=s(7294),a=s(5121);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={q:"",limit:20},s={paging:{total:0,primary_results:0,offset:0,limit:0},results:[]};(e={params:t,...e}).params={...t,...e.params};let[i,n]=(0,r.useState)(!1),[l,d]=(0,r.useState)(e.params),[o,u]=(0,r.useState)(s),c=async()=>{n(!0);try{let{data:e}=await (0,a.Z)({method:"get",url:"https://api.mercadolibre.com/sites/MLB/search",params:l});return e.results=e.results.map(e=>({id:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail,description:""})),u(e),e}catch(e){u(s)}finally{n(!1)}};return{busy:i,params:l,paramsUpdate:e=>{d(t=>({...t,...e}))},setParams:d,response:o,submit:c}}},8483:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(5893),a=s(9008),i=s.n(a),n=s(7294),l=s(5121),d=()=>{let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(null);return{busy:e,response:s,load:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return null;t(!0);try{let{data:s}=await (0,l.Z)({method:"get",url:"https://api.mercadolibre.com/items",params:{ids:e}});if(void 0!==s[0]&&!s[0].body.error){let e=s[0].body,a=[];return e.attributes.map(e=>{let t=e.values.map(e=>e.name).join(", ");a.push("<p>".concat(e.name,": ").concat(t,"</p>"))}),e={id:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail,description:a.join("<br />")},r(e),t(!1),e}return null}catch(e){r(null)}finally{t(!1)}return null}}},o=s(1163),u=s(8243),c=s(9814),m=s(7726),p=s(5177);function h(){let e=(0,c.Z)(),t=(0,o.useRouter)(),s=d(),a=(0,n.useContext)(p.A),[l,h]=(0,n.useState)(null),x=(0,u.Z)({params:{q:"Autom\xf3veis",limit:6}});return(0,n.useEffect)(()=>{t.query.id&&(async()=>{let e=Array.isArray(t.query.id)?t.query.id[0]:t.query.id,r=await s.load(e);r&&(h(a.itemFind(r)),x.paramsUpdate({q:r.title}))})()},[t]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{x.submit()},1e3);return()=>{clearTimeout(e)}},[x.params]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"Produto"})}),(0,r.jsx)("main",{className:"container mx-auto",children:(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"col-span-12",children:[!s.busy&&!s.response&&(0,r.jsx)("div",{children:"Produto n\xe3o encontrado"}),!s.busy&&s.response&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-bold text-3xl",children:s.response.title}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{className:"border rounded-md overflow-hidden",style:{maxWidth:250},children:[(0,r.jsx)("div",{style:{minWidth:250,maxWidth:250,height:250,background:"url(".concat(s.response.thumbnail,") center center no-repeat")}}),(0,r.jsx)("div",{className:"font-bold text-2xl text-center py-3 text-green-600 bg-green-100",children:e.money(s.response.price)}),!l&&(0,r.jsx)("button",{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4",onClick:()=>{s.response&&(a.itemAdd(s.response),h(a.itemFind(s.response)))},children:"Adicionar ao carrinho"}),l&&(0,r.jsxs)("div",{className:"flex border-t",children:[(0,r.jsx)("div",{className:"grow",children:(0,r.jsx)("input",{type:"number",className:"w-full p-2",value:l.quantity,onInput:e=>{let t=e.target;l.quantity=+t.value,a.itemUpdate(l)}})}),(0,r.jsx)("button",{type:"button",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4",onClick:async()=>{await a.itemRemove(l.product),h(null)},children:"Remover"})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:s.response.description}}),(0,r.jsx)("br",{})]})]}),(0,r.jsxs)("div",{className:"col-span-12",children:[(0,r.jsx)("h2",{className:"font-bold text-3xl mb-3",children:"Relacionados"}),(0,r.jsxs)("div",{className:"flex gap-6 border-gray-200 overflow-auto",children:[x.busy&&[...Array(10)].map((e,t)=>(0,r.jsxs)("div",{className:"rounded-lg overflow-hidden border mx-auto lg:mx-0 flex flex-col",style:{minWidth:250,maxWidth:250},children:[(0,r.jsx)("div",{className:"bg-gray-200",style:{minHeight:200,maxHeight:200}}),(0,r.jsxs)("div",{className:"grow",children:[(0,r.jsx)("div",{className:"h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 mt-5 mx-2"}),(0,r.jsx)("div",{className:"h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 mt-5 mx-4"})]}),(0,r.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 mt-4",style:{minHeight:50,maxHeight:50}})]},t)),!x.busy&&x.response.results.map(e=>(0,r.jsx)("div",{style:{maxWidth:250},className:"mx-auto lg:mx-0",children:(0,r.jsx)(m.Z,{product:e})},e.id))]})]})]})})]})}}},function(e){e.O(0,[448,774,888,179],function(){return e(e.s=8871)}),_N_E=e.O()}]);