(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{8871:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return r(8483)}])},8243:function(e,t,r){"use strict";var s=r(7294),n=r(5121);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={q:"",limit:20},r={paging:{total:0,primary_results:0,offset:0,limit:0},results:[]};(e={params:t,...e}).params={...t,...e.params};let[i,l]=(0,s.useState)(!1),[a,o]=(0,s.useState)(e.params),[u,d]=(0,s.useState)(r),c=async()=>{l(!0);try{let{data:e}=await (0,n.Z)({method:"get",url:"https://api.mercadolibre.com/sites/MLB/search",params:a});return e.results=e.results.map(e=>({id:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail})),d(e),e}catch(e){d(r)}finally{l(!1)}};return{busy:i,params:a,paramsUpdate:e=>{o(t=>({...t,...e}))},setParams:o,response:u,submit:c}}},8483:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(5893),n=r(9008),i=r.n(n),l=r(7294),a=r(5121),o=()=>{let[e,t]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null);return{busy:e,response:r,load:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return null;t(!0);try{let{data:r}=await (0,a.Z)({method:"get",url:"https://api.mercadolibre.com/items",params:{ids:e}});if(void 0!==r[0]&&!r[0].body.error){let e=r[0].body;return e={id:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail},s(e),t(!1),e}return null}catch(e){s(null)}finally{t(!1)}return null}}},u=r(1163),d=r(8243),c=r(9814),m=r(1205),p=r(5177);function h(){let e=(0,c.Z)(),t=(0,u.useRouter)(),r=o(),n=(0,l.useContext)(p.A),[a,h]=(0,l.useState)(null),x=(0,d.Z)({params:{q:"Autom\xf3veis",limit:3}});return(0,l.useEffect)(()=>{t.query.id&&(async()=>{let e=Array.isArray(t.query.id)?t.query.id[0]:t.query.id,s=await r.load(e);s&&(h(n.itemFind(s)),x.paramsUpdate({q:s.title}))})()},[t.query]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{x.submit()},1e3);return()=>{clearTimeout(e)}},[x.params]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Produto"})}),(0,s.jsx)("main",{className:"container mx-auto",children:(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-3",children:[(0,s.jsxs)("div",{className:"col-span-4",children:[!r.busy&&!r.response&&(0,s.jsx)("div",{children:"Produto n\xe3o encontrado"}),!r.busy&&r.response&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-bold text-3xl",children:r.response.title}),(0,s.jsx)("h1",{className:"font-bold text-2xl text-green-600",children:e.money(r.response.price)}),(0,s.jsx)("br",{}),(0,s.jsxs)("div",{className:"border rounded-md overflow-hidden",style:{maxWidth:250},children:[(0,s.jsx)("div",{style:{minWidth:250,maxWidth:250,height:250,background:"url(".concat(r.response.thumbnail,") center center no-repeat")}}),!a&&(0,s.jsx)("button",{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4",onClick:()=>{r.response&&(n.itemAdd(r.response),h(n.itemFind(r.response)))},children:"Adicionar ao carrinho"}),a&&(0,s.jsxs)("div",{className:"flex border-t",children:[(0,s.jsx)("div",{className:"grow",children:(0,s.jsx)("input",{type:"number",className:"w-full p-2",value:a.quantity,onInput:e=>{let t=e.target;a.quantity=+t.value,n.itemUpdate(a)}})}),(0,s.jsx)("button",{type:"button",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4",onClick:async()=>{await n.itemRemove(a.product),h(null)},children:"Remover"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("h2",{className:"font-bold text-3xl",children:"Relacionados"}),x.response.results.map(e=>(0,s.jsx)(m.Z,{product:e},e.id))]})]})})]})}}},function(e){e.O(0,[448,774,888,179],function(){return e(e.s=8871)}),_N_E=e.O()}]);